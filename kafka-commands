docker service create --name zookeeper --mount type=volume,source=zoo-data,destination=/tmp/zookeeper --publish 2181:2181 --network kafka-net --constraint node.labels.zoo==1 --mode global kafka:latest /kafka/bin/zookeeper-server-start.sh /kafka/config/zookeeper.properties

docker service create --name kafka1 --mount type=volume,source=k1-logs,destination=/tmp/kafka-logs --publish 9093:9093 --network kafka-net --mode global --constraint node.labels.kafka==1 kafka:latest /kafka/bin/kafka-server-start.sh /kafka/config/server.properties --override listeners=INT://:9092,EXT://0.0.0.0:9093 --override listener.security.protocol.map=INT:PLAINTEXT,EXT:PLAINTEXT --override inter.broker.listener.name=INT --override advertised.listeners=INT://:9092,EXT://ec2-3-21-198-203.us-east-2.compute.amazonaws.com:9093 --override zookeeper.connect=zookeeper:2181 --override broker.id=1


docker service create --name kafka2 --mount type=volume,source=k2-logs,destination=/tmp/kafka-logs --publish 9094:9094 --network kafka-net --mode global --constraint node.labels.kafka==2 kafka:latest /kafka/bin/kafka-server-start.sh /kafka/config/server.properties --override listeners=INT://:9092,EXT://0.0.0.0:9094 --override listener.security.protocol.map=INT:PLAINTEXT,EXT:PLAINTEXT --override inter.broker.listener.name=INT --override advertised.listeners=INT://:9092,EXT://ec2-3-21-175-113.us-east-2.compute.amazonaws.com:9094 --override zookeeper.connect=zookeeper:2181 --override broker.id=2


docker service create --name kafka3 --mount type=volume,source=k3-logs,destination=/tmp/kafka-logs --publish 9095:9095 --network kafka-net --mode global --constraint node.labels.kafka==3 kafka:latest /kafka/bin/kafka-server-start.sh /kafka/config/server.properties --override listeners=INT://:9092,EXT://0.0.0.0:9095 --override listener.security.protocol.map=INT:PLAINTEXT,EXT:PLAINTEXT --override inter.broker.listener.name=INT --override advertised.listeners=INT://:9092,EXT://ec2-13-58-140-213.us-east-2.compute.amazonaws.com:9095 --override zookeeper.connect=zookeeper:2181 --override broker.id=3
